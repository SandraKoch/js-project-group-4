{"mappings":"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","sources":["src/javascript/config.js","src/javascript/refs.js","src/javascript/modal.js","src/javascript/libraryButtons.js","src/library.js"],"sourcesContent":["export const API_KEY = '81805be47c20a9977d0669120b6add4a';\nexport const ACCESS_TOKEN =\n  'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4MTgwNWJlNDdjMjBhOTk3N2QwNjY5MTIwYjZhZGQ0YSIsInN1YiI6IjY0ODIyOWYyZDJiMjA5MDBlYmJmM2RiOCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.QBYkVP1Y4DcB7g5RndWRVtYQ8Tp2I0wKn0TtL28dElE';\nexport let PAGE = 1;\nexport const options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization: 'Bearer ' + ACCESS_TOKEN,\n  },\n};\n","export const refs = {\n  searchFormElement: document.querySelector('#search-form'),\n  searchInputElement: document.querySelector('#search-input'),\n  main: document.querySelector('#main'),\n  loader: document.querySelector('#loader'),\n};\n","// import './fetchTrendingMovies';\nimport { options } from './config';\nimport { refs } from './refs';\n\nconst backdrop = document.querySelector('#backdrop');\n// const main = document.querySelector('#main'); to importujemy z refs\n\nconst openModal = event => {\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  backdrop.classList.remove('is-hidden');\n};\n\nconst closeModal = () => {\n  backdrop.innerHTML = '';\n  backdrop.classList.add('is-hidden');\n};\n\nrefs.main.addEventListener('click', openModal);\nwindow.addEventListener('keydown', event => {\n  if (event.code === 'Escape') {\n    backdrop.classList.add('is-hidden');\n  }\n  backdrop.innerHTML = '';\n});\n\nbackdrop.addEventListener('click', event => {\n  if (event.target === backdrop) {\n    backdrop.classList.add('is-hidden');\n  }\n  backdrop.innerHTML = '';\n});\n\n//is it necessary to create a new fetch ?\n\nfunction fetchMovieInfo(movieId) {\n  return fetch(`https://api.themoviedb.org/3/movie/${movieId}`, options)\n    .then(response => response.json())\n    .catch(error => console.log(error));\n}\n\nrefs.main.addEventListener('click', e => {\n  fetchMovieInfo(e.target.id)\n    .then(movie => {\n      fillModal(movie);\n      watchedQueue(movie);\n    })\n    .catch(error => console.log(error));\n});\n\nfunction fillModal(movie) {\n  backdrop.insertAdjacentHTML(\n    'beforeend',\n    `<div id=\"modal\" class=\"modal\">\n    <button id=\"modal-close-button\" class=\"modal-close-button\">\n    <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g id=\"close\">\n    <path id=\"Vector 1\" d=\"M8 8L22 22\" stroke=\"black\" stroke-width=\"2\"/>\n    <path id=\"Vector 2\" d=\"M8 22L22 8\" stroke=\"black\" stroke-width=\"2\"/>\n    </g>\n    </svg>\n    </button>\n    <div class=\"modal-content\">\n<div id=\"image-box\" class=\"image-box\">\n  <img src=\"https://image.tmdb.org/t/p/w500${movie.poster_path}\" id=\"image-box__image\" class=\"image-box__image\" />\n</div>\n<div id=\"movie-info\" class=\"movie-info\">\n  <h2 id=\"movie-title\" class=\"movie-title\">${movie.title}</h2>\n  <div class=\"movie-details\">\n    <ul class=\"movie-details__list movie-details__list-aspects\">\n      <li class=\"movie-details__item-aspect\">\n        <p class=\"movie-details__aspect\">Vote / Votes</p>\n      </li>\n      <li class=\"movie-details__item-aspect\">\n        <p class=\"movie-details__aspect\">Popularity</p>\n      </li>\n      <li class=\"movie-details__item-aspect\">\n        <p class=\"movie-details__aspect\">Orginal Title</p>\n      </li>\n      <li class=\"movie-details__item-aspect\">\n        <p class=\"movie-details__aspect\">Genre</p>\n      </li>\n    </ul>\n    <ul class=\"movie-details__list\">\n      <li class=\"movie-details__item-value\">\n        <p id=\"movie-details__value\" class=\"movie-details__value\">\n          <span id=\"movie-rating\" class=\"movie-rating\">${movie.vote_average}</span> / <span\n            id=\"movie-votes\"\n            class=\"movie-votes\"\n            >${movie.vote_count}</span\n          >\n        </p>\n      </li>\n      <li class=\"movie-details__item-value\">\n        <p id=\"movie-details__value\" class=\"movie-details__value\">\n          <span id=\"movie-popularity\" class=\"movie-popularity\">${movie.popularity}</span>\n        </p>\n      </li>\n      <li class=\"movie-details__item-value\">\n        <p id=\"movie-details__value\" class=\"movie-details__value\">\n          <span id=\"orginal-movie-title\" class=\"orginal-movie-title\">${movie.original_title}</span>\n        </p>\n      </li>\n      <li class=\"movie-details__item-value\">\n        <p id=\"movie-details__value\" class=\"movie-details__value\">\n          <span id=\"movie-genre\" class=\"movie-genre\">${movie.genres[0].name}</span>\n        </p>\n      </li>\n    </ul>\n  </div>\n  <div class=\"movie-description\">\n    <p class=\"movie-description__about\">ABOUT</p>\n    <p id=\"movie-description__description\" class=\"movie-description__description\">${movie.overview}</p>\n  </div>\n  <div class=\"buttons-box\">\n    <button type=\"button\" id=\"watched-button\" class=\"watched-button button\">ADD TO WATCHED</button>\n    <button type=\"button\" id=\"queue-button\" class=\"queue-button button\">ADD TO QUEUE</button>\n  </div>\n</div>\n<div>\n</div>\n<div class=\"scroll-down\"></div>`,\n  );\n\n  const modalWindow = document.querySelector('#modal');\n  modalWindow.addEventListener('click', event => {\n    event.stopPropagation();\n  });\n\n  const closeBtn = document.querySelector('#modal-close-button');\n  closeBtn.addEventListener('click', closeModal);\n}\n\nconst watchedQueue = movie => {\n  const watchedBtn = document.querySelector('#watched-button');\n  const queueBtn = document.querySelector('#queue-button');\n\n  const addToLS = (movie, key) => {\n    let watchedArr = JSON.parse(localStorage.getItem(key));\n    if (watchedArr === null) watchedArr = [];\n    if (watchedArr.find(movieInArr => movieInArr.id === movie.id)) {\n      console.log('Is on list');\n      return;\n    }\n    console.log(movie.id);\n    watchedArr.push(movie);\n    console.log(watchedArr);\n    const jsonMovie = JSON.stringify(watchedArr);\n    localStorage.setItem(key, jsonMovie);\n  };\n\n  watchedBtn.addEventListener('click', () => {\n    addToLS(movie, 'watched');\n  });\n  queueBtn.addEventListener('click', () => {\n    addToLS(movie, 'queue');\n  });\n};\n","const watchedBtn = document.querySelector('#user-watched-btn');\nconst queueBtn = document.querySelector('#user-queue-btn');\n\nwatchedBtn.addEventListener('focus', () => {\n  queueBtn.classList.remove('button--active');\n  watchedBtn.classList.add('button--active');\n});\n\nqueueBtn.addEventListener('focus', () => {\n  watchedBtn.classList.remove('button--active');\n  queueBtn.classList.add('button--active');\n});\n","import './sass/main.scss';\nimport './javascript/modal';\nimport './javascript/libraryButtons';\nimport { refs } from './javascript/refs';\n// import './javascript/fetchTrendingMovies';\n// import { fetchTrendingMovies } from './javascript/fetchTrendingMovies';\n//import './javascript/loader.js';\n\n// const main = document.querySelector('#main'); to importujemy z refs\nlet genresArr = [];\n\nconst loadWatchedFromLS = key => {\n  try {\n    const parsedArr = JSON.parse(localStorage.getItem(key));\n    console.log(parsedArr);\n    if (parsedArr === null) return;\n    parsedArr.forEach(film => {\n      console.log(film);\n      console.log(genresArr);\n      const movieGenres = film.genres\n        .map(genreId => {\n          const genre = genresArr.find(genre => genre.id === genreId);\n          return genre ? genre.name.toString() : '';\n        })\n        .join(', ');\n      const releaseDate = new Date(film.release_date).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: undefined,\n        day: undefined,\n      });\n      refs.main.insertAdjacentHTML(\n        'beforeend',\n        `\n        <ul id=\"main__list\" class=\"main__list\">\n          <li id=\"main__list-item\" class=\"main__list-item\">\n            <figure id=\"main__movie\" class=\"main__movie\">\n              <img id=\"${film.id}\" class=\"main__image\"\n                src=\"https://image.tmdb.org/t/p/w500${film.poster_path}\" alt=\"${film.title}\" />\n              <figcaption id=\"main__caption\" class=\"main__caption\">\n                <span id=\"main__movie-name\" class=\"main__movie-name\">\n                  ${film.original_title}\n                </span>\n                <div>\n                <span id=\"main__movie-genres\" class=\"main__movie-data\">${movieGenres}</span>\n                <span class=\"main__movie-data\">|</span>\n                <span id=\"main__movie-release-date\" class=\"main__movie-release-date main__movie-data\">\n                ${releaseDate}\n                </span>\n                </div>\n              </figcaption>\n            </figure>\n          </li>\n        </ul>\n      `,\n      );\n    });\n    return parsedArr;\n  } catch (e) {\n    alert(`There was a mistake ${e.toString()}`);\n  }\n};\n\nconst userQueue = document.querySelector('#user-queue-btn');\nconst userWatched = document.querySelector('#user-watched-btn');\n\nuserQueue.addEventListener('click', () => {\n  console.log('queue btn');\n  refs.main.innerHTML = ' ';\n  loadWatchedFromLS('queue');\n});\nuserWatched.addEventListener('click', () => {\n  console.log('watched btn');\n  refs.main.innerHTML = ' ';\n  loadWatchedFromLS('watched');\n});\n\nloadWatchedFromLS('watched');\n"],"names":["$f1a4d28cfa1b1f0d$export$41c562ebe57d11e2","method","headers","accept","Authorization","$ad8ecf0e17f0c6f3$export$21666b427502ea6d","searchFormElement","document","querySelector","searchInputElement","main","loader","$139c6285baa179a5$var$backdrop","$139c6285baa179a5$var$closeModal","innerHTML","classList","add","addEventListener","event","target","nodeName","remove","window","code","e","movieId","id","fetch","then","response","json","catch","error","console","log","movie","insertAdjacentHTML","poster_path","title","vote_average","vote_count","popularity","original_title","genres","name","overview","stopPropagation","$139c6285baa179a5$var$fillModal","$139c6285baa179a5$var$watchedQueue","watchedBtn","queueBtn","addToLS","key","watchedArr","JSON","parse","localStorage","getItem","find","movieInArr","push","jsonMovie","stringify","setItem","$8376ca1135b5a651$var$watchedBtn","$8376ca1135b5a651$var$queueBtn","$9a8afeea60b9dfd3$var$genresArr","$9a8afeea60b9dfd3$var$loadWatchedFromLS","parsedArr","forEach","film","movieGenres","map","genreId","genre","toString","join","releaseDate","Date","release_date","toLocaleDateString","year","month","undefined","day","alert","$9a8afeea60b9dfd3$var$userQueue","$9a8afeea60b9dfd3$var$userWatched"],"version":3,"file":"library.cea2e3fd.js.map"}