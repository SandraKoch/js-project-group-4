const e=document.getElementById("loader"),n=document.getElementById("search-form"),t=document.getElementById("search-input");function a(){e.classList.add("active")}function i(){e.classList.remove("active")}n.addEventListener("submit",(function(e){e.preventDefault(),function(){const e=t.value.trim();if(""!==e){const n=new XMLHttpRequest;n.addEventListener("loadstart",(()=>{a()})),n.addEventListener("loadend",(()=>{i()}));const t="81805be47c20a9977d0669120b6add4a",o=`https://api.themoviedb.org/3/search/movie?query=${encodeURIComponent(e)}&api_key=${t}`;n.open("GET",o,!0),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){if(200===n.status){const e=JSON.parse(n.responseText);console.log(e)}else console.error("Wystąpił błąd podczas żądania API.")},n.onerror=function(){console.error("Wystąpił błąd podczas żądania API.")},n.send()}}()})),a(),setTimeout((function(){i()}),250),window.addEventListener("beforeunload",(function(){a()}));const o=document.querySelector("#main");let s=[];const c=e=>{try{const n=JSON.parse(localStorage.getItem(e));if(console.log(n),null===n)return;return n.forEach((e=>{console.log(e),console.log(s);const n=e.genres.map((e=>{const n=s.find((n=>n.id===e));return n?n.name.toString():""})).join(", "),t=new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:void 0,day:void 0});o.insertAdjacentHTML("beforeend",`\n        <ul id="main__list" class="main__list">\n          <li id="main__list-item" class="main__list-item">\n            <figure id="main__movie" class="main__movie">\n              <img id="${e.id}" class="main__image"\n                src="https://image.tmdb.org/t/p/w500${e.poster_path}" alt="${e.title}" />\n              <figcaption id="main__caption" class="main__caption">\n                <span id="main__movie-name" class="main__movie-name">\n                  ${e.original_title}\n                </span>\n                <div>\n                <span id="main__movie-genres" class="main__movie-data">${n}</span>\n                <span class="main__movie-data">|</span>\n                <span id="main__movie-release-date" class="main__movie-release-date main__movie-data">\n                ${t}\n                </span>\n                </div>\n              </figcaption>\n            </figure>\n          </li>\n        </ul>\n      `)})),n}catch(e){alert(`There was a mistake ${e.toString()}`)}},d=document.querySelector("#user-queue-btn"),r=document.querySelector("#user-watched-btn");d.addEventListener("click",(()=>{console.log("queue btn"),o.innerHTML=" ",c("queue")})),r.addEventListener("click",(()=>{console.log("watched btn"),o.innerHTML=" ",c("watched")})),c("watched");
//# sourceMappingURL=library.4999cd30.js.map
